<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />

		<script src="http://111.67.192.116:8020/WebApp/js/zepto.js" type="text/javascript" charset="utf-8"></script>

		<!--<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>-->
		<title></title>
		<style type="text/css">
			body,
			html {
				overflow: hidden;
				width: 100%;
				height: 100%;
			}
			* {
				margin: 0;
				padding: 0;
			}
			img {
				width: 100%;
				height: 300px;
				vertical-align: middle;
				position: relative;
				left: 0;
			}
			ul {
				position: relative;
			}
			ul li {
				list-style: none;
				float: left;
			}
		</style>
		<script type="text/javascript">
			window.onload = function() {
				var aLiLength = $("#ulwarp li").length;
				reSize();
				window.onresize = function() {
					reSize()
				};

				function reSize() {
					var viewWidth = document.documentElement.clientWidth;
					$("#ulwarp").css("width", aLiLength * viewWidth);
					$("#ulwarp li img").css("width", viewWidth);
				}
				var disX = 0,
					index = 0,
					timer = null;
				$("#ulwarp").get(0).addEventListener("touchstart", s = function(event) {
					
					$("#ulwarp").css("transition","none");
					
					clearInterval(timer);
					var clickStart = 0,
						clickEnd = 0;
					disX = event.touches[0].pageX - this.offsetLeft;
					clickStart = clickEnd = event.touches[0].pageX;
					if (index == 0) {
						$("#ulwarp li:last").css({
							"position": "relative",
							"left": -document.documentElement.clientWidth * aLiLength
						});
					}
					document.addEventListener("touchmove", m = function(event) {
						$("#ulwarp").css("left", event.touches[0].pageX - disX);
						clickEnd = event.touches[0].pageX;
						event.stopPropagation();
						event.preventDefault();
					}, false);
					document.addEventListener("touchend", e = function(event) {
						document.removeEventListener("touchmove", m);
						document.removeEventListener("touchend", e);
						var tem = clickStart - clickEnd;
						if (tem > 0 && Math.abs(tem) > 50) {
							console.info("左滑动");
							left();
						} else if (tem < 0 && Math.abs(tem) > 50) {
							console.info("右滑动");
							right();
						} else {
							$("#ulwarp").animate({
								left: -index * document.documentElement.clientWidth
							}, 500);
						}
						//timer = setTimeout(autoPaly, 5000)
					}, false);
					event.stopPropagation();
					event.preventDefault();
				}, false);

				function left() {
					index++;
					if (index >= aLiLength - 1) {
						$("#ulwarp li:first").css({
							"position": "relative",
							"left": aLiLength * document.documentElement.clientWidth
						})
					}
					$("#ulwarp").animate({
						left: -index * document.documentElement.clientWidth
					}, {
						duration: 500,
						complete: function() {
							if (index == aLiLength) {
								$("#ulwarp li:first").css({
									"position": "static",
									"left": "0px"
								})
								$("#ulwarp").css("left", "0px");
								index = 0;
							}
							if (index == 1) {
								$("#ulwarp li").eq(aLiLength - 1).css({
									"position": "static",
									"left": "0px"
								});
							}
						}
					})
				}

				function right() {
						index--;
						if (index == -1) {
							$("#ulwarp li:last").css({
								"position": "relative",
								"left": -document.documentElement.clientWidth * aLiLength
							});
						}
						$("#ulwarp").animate({
							left: -index * document.documentElement.clientWidth
						}, {
							duration: 500,
							complete: function() {
								if (index == -1) {
									$("#ulwarp li").eq(aLiLength - 1).css({
										"position": "static",
										"left": "0px"
									})
									$("#ulwarp").css("left", -(aLiLength - 1) * document.documentElement.clientWidth);
									index = aLiLength - 1;
								}
								if (index == 1) {
									$("#ulwarp li:first").css({
										"position": "static",
										"left": "0px"
									})
								}
							}
						});
					}
					//autoPaly();

				function autoPaly() {
					timer = setInterval(left, 2000);
				}
			}
		</script>
	</head>

	<body>
		<ul id="ulwarp">
			<li>
				<img src="http://111.67.192.116:8020/WebApp/img/1.jpg" alt="" />
			</li>
			<li>
				<img src="http://111.67.192.116:8020/WebApp/img/2.jpg" alt="" />
			</li>
			<li>
				<img src="http://111.67.192.116:8020/WebApp/img/3.jpg" alt="" />
			</li>

		</ul>
	</body>

</html>