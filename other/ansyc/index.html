<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="bower_components/async/lib/async.js"></script>
    <script type="text/javascript">
        /*

         async.series([
         function (callback) {
         // do some stuff ...
         console.log(1);
         setTimeout(function () {
         console.log(22);

         callback(null,{name:"kylin"});
         },3000);
         },
         function (callback) {
         // do some more stuff ...
         console.log(2);
         callback(null, {password:'123123'});
         }
         ],
         // optional callback
         function (err, results) {
         console.log(results);
         // results is now equal to ['one', 'two']
         });*/


        async.waterfall([
            function (cb) {

                setTimeout(function () {

                    cb(null, {name: "kylin"});
                }, 1000)

            }, function (results, cb) {
                console.log(results);
                results.password = "123123",
                        setTimeout(function () {
                            cb(null, results);
                        }, 5000)

            }, function (results, cb) {
                console.log(results);
                results.sb = 'sb';
                setTimeout(function () {
                    cb(null, results);
                }, 5000)
            }
        ], function (err, results) {
            //查到狗狗了，可以牵出来了
            console.log(results);

        })
    </script>
</head>
<body>

</body>
</html>